---
title: MySQL 数据库的四种隔离级别
category:
  - 数据库
tags:
  - MySQL
date: 2024-11-15 19:23:00
source: https://blog.csdn.net/qq_42082542/article/details/123536715
---

### 前置概念

#### 脏读

又称无效数据的读出，是指在数据库访问中，事务 T1 将某一值修改但是还未提交，然后事务 T2 读取该值，此后 T1 因为某种原因撤销对该值的修改并提交，这就导致了 T2 所读取到的数据是无效的，值得注意的是，脏读一般是针对于 update 操作的。

#### 不可重复读

是指在数据库访问中，一个事务范围内两个相同的查询却返回了不同数据。在一个事务内，多次读同一个数据。在这个事务还没有结束时，另一个事务也访问该同一数据并修改数据。那么，在第一个事务的两次读数据之间。由于另一个事务的修改，那么第一个事务两次读到的数据可能不一样，这样就发生了在一个事务内两次读到的数据是不一样的，因此称为不可重复读，即原始读取不可重复。

#### 幻读

事务 A 按照一定条件进行数据读取， 期间事务 B 插入了相同搜索条件的新数据，事务 A 再次按照原先条件进行读取时，发现了事务 B 新插入的数据称为幻读。

**不可重复读侧重于修改，幻读侧重于新增或删除。解决不可重复读的问题只需锁住满足条件的行，解决幻读需要锁表**

### 四种隔离级别

| 隔离级别               | 脏读 | 不可重复读 | 幻读 |
|:-- | :--:|:--:|:--:|
| 读未提交（read-uncommitted） | 是   | 是         | 是   |
| 读提交（read-committed）     | 否   | 是         | 是   |
| 可重读（repeatable-read）    | 否   | 否         | 是   |
| 可串行化（serializable）     | 否   | 否         | 否   |

**read-uncommitted 读未提交**

在该级别，所有的事务都可以看到其他未提交事务的执行结果，本隔离级别很少用于实际应用，因为它的性能不比其他级别好多少。读取未提交的数据，也称之为脏读。

**read-committed 读提交内容**

这是大多数数据库系统的默认隔离级别（但不是 MYSQL 默认的），它满足了隔离的简单定义：一个事务只能看见已提交事务所做的改变。也支持所谓的不可重复读。

**repeatable-read 可重读**

是 MYSQL 默认的，确保统一事务的多个实例在并发读取数据时，会看到同样的数据行。

**serializable 可串行化**

这是最高的隔离级别，他通过强制事务排序，使之不可能相互冲突，从而解决幻读问题。简而言之，他是在每个读的数据行上加上**共享锁**。在这个级别可能导致大量的超时现象和锁竞争。

**低级别的隔离级一般支持更高的并发处理，并拥有更低的系统开销。**

### 事务

事务的四个性值：ACID（原子性，一致性，隔离性和持久性）

- 原子性：事务中包含有很多操作，这些操作要么全部执行，要么全部不执行，所以支持回滚操作。

- 一致性：系统从一种一致性到另一种一致性状态。事物的一致性决定了一个系统设计和实现的复杂度。事务可以具有不同程度的一致性。

	- 强一致性：读操作可以立即读到操作的更新操作。

	- 弱一致性：提交的更新操作不一定立即会被读操作读到，这种情况会存在一个不一致窗口，指的是读操作可以读到最新值的一段时间。

	- 最终一致性：（弱一致性的一种特殊情况）最终所有的事务都会读到之前事务更新的最新值。

- 隔离性：有上面四种隔离性。

- 持久性：事务的操作对数据库的影响时持久的。
